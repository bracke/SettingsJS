<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
<head>
   <meta charset="utf-8"/>
   <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>

   <title>Testing Settingsjs</title>

   <meta name="description" content=""/>
   <meta name="viewport" content="width=device-width"/>
   <link rel="stylesheet" href="../styles/bootstrap.css">
   <link rel="stylesheet" href="../styles/main.css"/>
   <script src="../scripts/vendor/modernizr.min.js"></script>
</head>
<body>
<div class="container" style="margin-top:30px">
    <div class="hero-unit" style="padding:10px">
        <h2>Settingsjs</h2>
        <p>Focus on the awesome part of your app - let Settingsjs handle the settings of your app. </p>
    </div>

    <div class="well well-small" style="text-align:center;">Start of UI generated by Settingsjs</div>
    <div id="settingscontainer"></div>
    <div class="well well-small" style="text-align:center;">End of UI generated by Settingsjs</div>

    <table class="">
        <thead>
        <tr>
            <th><input type="button" class="btn" accesskey="0" onclick="updateModel('input')"
                       id="updateinputbutton"
                       value="Update settings with input (alt+0 / ctrl+alt+0)">
            </th>
            <th><input type="button" class="btn" accesskey="9" onclick="updateTextArea('output')"
                       id="updateoutputbutton"
                       value="Get output from settings (alt+9 / ctrl+alt+9)">
            </th>
            <th style="width:100%">&nbsp;</th>
        </tr>
        </thead>
        <tbody>
        <tr>
            <td><textarea id="input" style="width: 455px; height: 400px"
                 placeholder="Insert JSON here and click on the 'Update settings' button or press alt+0 (ctrl+alt+0 on OSX)"></textarea>
            </td>
            <td><textarea id="output" style="width: 455px; height: 400px"
                 placeholder="Click on the 'Get output' button to get an updated JSON version of your settings or press alt+9 (ctrl+alt+9 on OSX)"></textarea>
            </td>
            <td style="width:100%">&nbsp;</td>
        </tr>
        </tbody>
    </table>
</div>

<!--[if lt IE 7]>
  <p class="chromeframe">You are using an outdated browser. <a href="http://browsehappy.com/">Upgrade your browser today</a> or <a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to better experience this site.</p>
<![endif]-->

<script src="../scripts/settings.js"></script>
<script defer="defer">

 /*

  Example          : var settingsobj = settings(JSON,settingscontainerid,settings);
  Example JSON     : {"ircEvent":"PRIVMSG", "method":"newURI", "regex":"^http://.*", "subobject":{  "whatever1" :true, "whatever2" :""  }}
  Example settings : { "defaulttabname" : "Main", "formfield_nameprefix" : "Settingsformfield" }

 */

var updateModel = function(inputfield)
{
     var formfield = document.getElementById(inputfield);
     if (formfield != null)
     {
         Settings.initialize(formfield.value,"settingscontainer");
     }
}
var updateTextArea = function(outputfield, output)
{
     var formfield = document.getElementById(outputfield);
     if (formfield != null)
     {
         formfield.value = Settings.getJSONSettings()
     }
}

var formfield = document.getElementById("input");
if (formfield != null)
{
    formfield.value = '{"ircEvent":"PRIVMSG", "method":"newURI", "regex":"^http://.*", "subobject":{  "whatever1" :true, "whatever2" :""  }}';
}

updateModel('input');

</script>
</body></html>